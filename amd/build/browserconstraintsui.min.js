define("local_softwarewarning/browserconstraintsui",["exports","core/templates"],(function(_exports,_templates){var obj;let anchor,root;function getAncestorWithClass(node,theclass){for(;!node.classList.contains(theclass);){if(null==node.parentElement)return null;node=node.parentElement}return node}async function renderTemplate(template,context){const html=await _templates.default.render(template,context),div=document.createElement("div");return div.innerHTML=html,div.firstElementChild}async function appendEmptyBrowserElement(){const node=await renderTemplate("local_softwarewarning/browserconfig_browser",{banners:["supported","unsupported","deprecated"],i:123,browsername:"",issinglerule:!0,singlebanner:"supported",multirulebanners:[{version:"",banner:"supported"}]});root.appendChild(node)}async function appendEmptyVersionElement(parentElement){console.log(parentElement);const node=await renderTemplate("local_softwarewarning/browserconfig_version",{banners:["unrecognized","supported","unsupported","deprecated"],version:"",banner:"unrecognized"});console.log(node),parentElement.appendChild(node)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=async function(config,bannertypes,defaultbrowsers){anchor=document.getElementById("local_softwarewarning-anchor"),root=await async function(){return await renderTemplate("local_softwarewarning/browserconfig",{banners:["supported","unsupported","deprecated"],browsers:[{i:0,browsername:"IE",issinglerule:!0,singlebanner:"unsupported",multirulebanners:[{version:"80",banner:"deprecated"}]},{i:1,browsername:"Firefox",issinglerule:!1,singlebanner:"unsupported",multirulebanners:[{version:"90",banner:"deprecated"},{version:"70",banner:"unsupported"}]}]})}();const selectEls=root.querySelectorAll("*[data-sw-selected]");for(let selectEl of selectEls)selectEl.value=selectEl.getAttribute("data-sw-selected");root.oninput=async e=>{const target=e.target,type=target.getAttribute("data-sw-type"),browserelement=getAncestorWithClass(target,"sw-browser");switch(console.log(type,e.target),type){case"name":const isEmpty=0===target.value.length;browserelement.setAttribute("data-sw-empty",isEmpty),isEmpty||null!==browserelement.nextElementSibling||await appendEmptyBrowserElement();break;case"issinglerule":browserelement.setAttribute("data-sw-singlerule",target.checked);break;case"multi-version":const misEmpty=0===target.value.length,versionelement=getAncestorWithClass(target,"sw-version");versionelement.setAttribute("data-sw-empty",misEmpty),misEmpty||null!==versionelement.nextElementSibling||await appendEmptyVersionElement(versionelement.parentElement);break;default:console.log(type,e.target)}},root.onclick=async e=>{const versionAncestor=getAncestorWithClass(e.target,"sw-delete-version");if(console.log(versionAncestor),null!=versionAncestor){const swverion=getAncestorWithClass(versionAncestor,"sw-version"),parent=swverion.parentElement;swverion.remove(),"true"!==parent.lastElementChild.getAttribute("data-sw-empty")&&await appendEmptyVersionElement(parent)}else{const browserAncestor=getAncestorWithClass(e.target,"sw-delete-browser");null!=browserAncestor&&(getAncestorWithClass(browserAncestor,"sw-browser").remove(),"true"!==root.lastElementChild.getAttribute("data-sw-empty")&&await appendEmptyBrowserElement())}},anchor.appendChild(root)},_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj}}));

//# sourceMappingURL=browserconstraintsui.min.js.map